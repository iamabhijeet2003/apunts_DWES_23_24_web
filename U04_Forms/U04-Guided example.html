<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-UK" xml:lang="en-UK" >

<head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />        <title>Unit 04. Form validation. Guided example.</title>
    <style>
        code{white-space: pre-wrap;}
        span.smallcaps{font-variant: small-caps;}
        div.columns{display: flex; gap: min(4vw, 1.5em);}
        div.column{flex: auto; overflow-x: auto;}
        div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
        ul.task-list{list-style: none;}
        ul.task-list li input[type="checkbox"] {
          width: 0.8em;
          margin: 0 0.8em 0.2em -1.6em;
          vertical-align: middle;
        }
        .display.math{display: block; text-align: center; margin: 0.5rem auto;}
        /* CSS for syntax highlighting */
        pre > code.sourceCode { white-space: pre; position: relative; }
        pre > code.sourceCode > span { line-height: 1.25; }
        pre > code.sourceCode > span:empty { height: 1.2em; }
        .sourceCode { overflow: visible; }
        code.sourceCode > span { color: inherit; text-decoration: inherit; }
        div.sourceCode { margin: 1em 0; }
        pre.sourceCode { margin: 0; }
        @media screen {
        div.sourceCode { overflow: auto; }
        }
        @media print {
        pre > code.sourceCode { white-space: pre-wrap; }
        pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
        }
        pre.numberSource code
          { counter-reset: source-line 0; }
        pre.numberSource code > span
          { position: relative; left: -4em; counter-increment: source-line; }
        pre.numberSource code > span > a:first-child::before
          { content: counter(source-line);
            position: relative; left: -1em; text-align: right; vertical-align: baseline;
            border: none; display: inline-block;
            -webkit-touch-callout: none; -webkit-user-select: none;
            -khtml-user-select: none; -moz-user-select: none;
            -ms-user-select: none; user-select: none;
            padding: 0 4px; width: 4em;
            color: #aaaaaa;
          }
        pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
        div.sourceCode
          {  background-color: #f8f8f8; }
        @media screen {
        pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
        }
        code span.al { color: #ef2929; } /* Alert */
        code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
        code span.at { color: #204a87; } /* Attribute */
        code span.bn { color: #0000cf; } /* BaseN */
        code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
        code span.ch { color: #4e9a06; } /* Char */
        code span.cn { color: #8f5902; } /* Constant */
        code span.co { color: #8f5902; font-style: italic; } /* Comment */
        code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
        code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
        code span.dt { color: #204a87; } /* DataType */
        code span.dv { color: #0000cf; } /* DecVal */
        code span.er { color: #a40000; font-weight: bold; } /* Error */
        code span.ex { } /* Extension */
        code span.fl { color: #0000cf; } /* Float */
        code span.fu { color: #204a87; font-weight: bold; } /* Function */
        code span.im { } /* Import */
        code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
        code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
        code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
        code span.ot { color: #8f5902; } /* Other */
        code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
        code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
        code span.ss { color: #4e9a06; } /* SpecialString */
        code span.st { color: #4e9a06; } /* String */
        code span.va { color: #000000; } /* Variable */
        code span.vs { color: #4e9a06; } /* VerbatimString */
        code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
        <link rel="stylesheet" href="../web_template/aqua.css" />  
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
      
</head>

<body>
    <div id="content">
                 <header id="title-block-header">
            <h1 class="title">Unit 04. Form validation. Guided
example.</h1>
            <!---->
            <!--  -->
                    </header>
                 <nav id="TOC" role="doc-toc">
            <div class="navContainer">
                                <h2 id="toc-title">Index</h2>
                 <ul>
<li><a href="#php-form-validation" id="toc-php-form-validation"><span
class="toc-section-number">1</span> PHP Form validation</a>
<ul>
<li><a href="#form-action" id="toc-form-action"><span
class="toc-section-number">1.1</span> Form action</a></li>
<li><a href="#validate-form-data" id="toc-validate-form-data"><span
class="toc-section-number">1.2</span> Validate form data</a></li>
<li><a href="#required-fields" id="toc-required-fields"><span
class="toc-section-number">1.3</span> Required fields</a></li>
<li><a href="#display-the-error-messages"
id="toc-display-the-error-messages"><span
class="toc-section-number">1.4</span> Display the error
messages</a></li>
<li><a href="#validate-inputs" id="toc-validate-inputs"><span
class="toc-section-number">1.5</span> Validate inputs</a></li>
<li><a href="#keep-the-values-in-the-form"
id="toc-keep-the-values-in-the-form"><span
class="toc-section-number">1.6</span> Keep the values in the
form</a></li>
<li><a href="#send-the-data-to-another-script"
id="toc-send-the-data-to-another-script"><span
class="toc-section-number">1.7</span> Send the data to another
script</a></li>
</ul></li>
</ul>
            </div>
        </nav>
                <main>
            <p>In this example we’re going to show how to validate a
            simple form, using auto-validation techniques.</p>
            <blockquote>
            <p><strong>Security is important!</strong>: This guide will
            show how to process PHP forms with security in mind. Proper
            validation of form data is important to protect your form
            from hackers and spammers!</p>
            </blockquote>
            <h1 data-number="1" id="php-form-validation"><span
            class="header-section-number">1</span> PHP Form
            validation</h1>
            <p>The HTML form we will be working at contains 2 input
            fields, email and password, and a submit button:</p>
            <div class="sourceCode" id="cb1"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;form</span> <span class="er">action</span><span class="ot">=</span><span class="st">&quot;&quot;</span> <span class="er">method</span><span class="ot">=</span><span class="st">&quot;post&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;label&gt;</span> E-mail: <span class="kw">&lt;br&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;text&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/label&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;label&gt;</span>Password: <span class="kw">&lt;br&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;password&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;pass&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/label&gt;</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;submit&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;submit&quot;</span> <span class="er">value</span><span class="ot">=</span><span class="st">&quot;Submit&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/form&gt;</span></span></code></pre></div>
            <p><img src="images/form1.png" /></p>
            <p>We will follow the next validation rules:</p>
            <ul>
            <li><strong>Email</strong>: Required and must contain a
            valid email address (with @ and .)</li>
            <li><strong>Password</strong>: Required and must have at
            least 8 characters.</li>
            </ul>
            <h2 data-number="1.1" id="form-action"><span
            class="header-section-number">1.1</span> Form action</h2>
            <p>As we want the form to be auto-validated, we have to send
            the data to itself:</p>
            <div class="sourceCode" id="cb2"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;form</span> <span class="er">action</span><span class="ot">=</span><span class="st">&quot;</span><span class="er">&lt;</span><span class="st">?php echo $_SERVER[&quot;</span><span class="er">PHP_SELF&quot;];?</span><span class="kw">&gt;</span>&quot; method=&quot;post&quot;&gt;</span></code></pre></div>
            <blockquote>
            <p>The <strong><code>$_SERVER["PHP_SELF"]</code></strong> is
            a super global variable that returns the filename of the
            currently executing script.</p>
            </blockquote>
            <p>However this code is vulnerable to some <strong>Cross
            Site Scripting (XSS)</strong> attacks, because and attacker
            can add a Javascript code to the url to execute malicious
            code. Try to add the next string to your form url:</p>
            <div class="sourceCode" id="cb3"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>...login.php/%22%3E%3Cscript%3Ealert(&#39;hacked&#39;)%3C/script%3E</span></code></pre></div>
            <p>This can be avoided by using the
            <strong><code>htmlspecialchars()</code></strong> function,
            which converts special characters to HTML entities. The form
            code should look like this:</p>
            <div class="sourceCode" id="cb4"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;form</span> <span class="er">method</span><span class="ot">=</span><span class="st">&quot;post&quot;</span> <span class="er">action</span><span class="ot">=</span><span class="st">&quot;</span><span class="er">&lt;</span><span class="st">?php echo htmlspecialchars($_SERVER[&quot;</span><span class="er">PHP_SELF&quot;]);?</span><span class="kw">&gt;</span>&quot;&gt;</span></code></pre></div>
            <h2 data-number="1.2" id="validate-form-data"><span
            class="header-section-number">1.2</span> Validate form
            data</h2>
            <p>In order to get clean data from the inputs, we are going
            to do 2 actions:</p>
            <ul>
            <li>Remove all the tags with the
            <strong><code>strip_tags()</code></strong> function.</li>
            <li>And strip unnecessary characters (extra space, tab,
            newline), with the PHP <strong><code>trim()</code></strong>
            function.</li>
            </ul>
            <div class="sourceCode" id="cb5"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="va">$email</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$POST</span>[<span class="st">&#39;email&#39;</span>]))<span class="ot">;</span></span></code></pre></div>
            <p>At the start of the script, we’ll check if the form has
            been submitted using
            <strong><code>$_SERVER["REQUEST_METHOD"]</code></strong>. If
            the REQUEST_METHOD is POST, then the form has been submitted
            and it should be validated. If it has not been submitted,
            skip the validation and display a blank form:</p>
            <div class="sourceCode" id="cb6"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?php</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">// define variables and set to empty values</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="va">$email</span> <span class="op">=</span> <span class="va">$pass</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="ot">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$_SERVER</span>[<span class="st">&quot;REQUEST_METHOD&quot;</span>] <span class="op">==</span> <span class="st">&quot;POST&quot;</span>) {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">$email</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>]))<span class="ot">;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">$pass</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>]))<span class="ot">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="kw">?&gt;</span></span></code></pre></div>
            <h2 data-number="1.3" id="required-fields"><span
            class="header-section-number">1.3</span> Required
            fields</h2>
            <p>The next step is to make input fields required and create
            error messages if needed.</p>
            <p>First, we add new variables for each error message:</p>
            <div class="sourceCode" id="cb7"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="va">$emailErr</span> <span class="op">=</span> <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="ot">;</span></span></code></pre></div>
            <p>Also, add an <code>if else</code> statement for each
            <code>$_POST</code> variable. This checks if the
            <code>$_POST</code> variable is empty (with the PHP
            <strong><code>empty()</code></strong> function). If it is
            empty, an error message is stored in the different error
            variables, and if it is not empty, it sends the user input
            data:</p>
            <div class="sourceCode" id="cb8"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="va">$email</span> <span class="op">=</span> <span class="va">$pass</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="ot">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="va">$emailErr</span> <span class="op">=</span> <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="ot">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$_SERVER</span>[<span class="st">&quot;REQUEST_METHOD&quot;</span>] <span class="op">==</span> <span class="st">&quot;POST&quot;</span>) {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>])) {</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">$emailErr</span> <span class="op">=</span> <span class="st">&quot;* Email is required&quot;</span><span class="ot">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">$email</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>]))<span class="ot">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>])){</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;* Password is required&quot;</span><span class="ot">;</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">$pass</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>]))<span class="ot">;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <h2 data-number="1.4" id="display-the-error-messages"><span
            class="header-section-number">1.4</span> Display the error
            messages</h2>
            <p>In the HTML form, we’ll add a little script after each
            required field, which generates the correct error
            message:</p>
            <div class="sourceCode" id="cb9"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;text&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;error&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;?</span>= $emailErr; <span class="kw">?&gt;</span> <span class="kw">&lt;/span&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;password&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;pass&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;error&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;?</span>= $passErr; <span class="kw">?&gt;</span> <span class="kw">&lt;/span&gt;</span></span></code></pre></div>
            <p>Try it!:</p>
            <p><img src="images/form2.png" /></p>
            <p>The next step is to validate the input data.</p>
            <h2 data-number="1.5" id="validate-inputs"><span
            class="header-section-number">1.5</span> Validate
            inputs</h2>
            <p>The easiest and safest way to check if an email address
            is well-formed is to use PHP’s
            <strong><code>filter_var()</code></strong> function with the
            <strong><code>FILTER_VALIDATE_EMAIL</code></strong>
            filter.</p>
            <p>In the code below, if the e-mail address is not
            well-formed, then store an error message:</p>
            <div class="sourceCode" id="cb10"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>])) {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">$emailErr</span> <span class="op">=</span> <span class="st">&quot;* Email is required&quot;</span><span class="ot">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">$email</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>]))<span class="ot">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">//Check if the email is well formed</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="fu">filter_var</span>(<span class="va">$email</span><span class="ot">,</span> <span class="cn">FILTER_VALIDATE_EMAIL</span>)) {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">$emailErr</span> <span class="op">=</span> <span class="st">&quot;* Invalid email format&quot;</span><span class="ot">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <blockquote>
            <p>Note that we are showing a different message for each
            error type.</p>
            </blockquote>
            <p>For the password, we simply test if it has a length of 8
            characters or more, after cleaning the string:</p>
            <div class="sourceCode" id="cb11"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>])){</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;* Password is required&quot;</span><span class="ot">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">$pass</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>]))<span class="ot">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">//Check if the password has at least 8 chars</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">strlen</span>(<span class="va">$pass</span>) <span class="op">&lt;</span> <span class="dv">8</span>) {</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;* The password must have at least 8 characters&quot;</span><span class="ot">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
            <h2 data-number="1.6" id="keep-the-values-in-the-form"><span
            class="header-section-number">1.6</span> Keep the values in
            the form</h2>
            <p>Now, if the user submits the values and the inputs have
            any errors, the form shows the error messages, but the
            inputs become blank and the user needs to enter the values
            again. This is especially frustrating in long forms!</p>
            <p>To show the values in the input fields after the user
            hits the submit button, we add a little PHP script inside
            the value attribute using the echo tag:</p>
            <div class="sourceCode" id="cb12"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>input type<span class="op">=</span><span class="st">&quot;text&quot;</span> name<span class="op">=</span><span class="st">&quot;email&quot;</span> value<span class="op">=</span><span class="st">&quot;&lt;?= </span><span class="va">$email</span><span class="st">;?&gt;&quot;</span><span class="op">&gt;</span> <span class="op">&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>input type<span class="op">=</span><span class="st">&quot;password&quot;</span> name<span class="op">=</span><span class="st">&quot;pass&quot;</span> value<span class="op">=</span><span class="st">&quot;&lt;?= </span><span class="va">$pass</span><span class="st">;?&gt;&quot;</span> <span class="op">&gt;</span></span></code></pre></div>
            <h2 data-number="1.7"
            id="send-the-data-to-another-script"><span
            class="header-section-number">1.7</span> Send the data to
            another script</h2>
            <p>If all the checks are ok, it’s time to send the data to
            another script that should do a check against a database to
            see if the pair email-password exists and is correct.
            However we will do a simple check against 2 variables for
            email and password, for example:</p>
            <ul>
            <li>Email: peter@mail.com</li>
            <li>Password: 12345678</li>
            </ul>
            <p>The problem now is how to pass this data. Passing
            passwords via the GET method is a bad idea for security
            reasons. And our form is passing the data to itself via the
            POST method. So we will use the
            <strong><code>header()</code></strong> statement for
            redirecting to the check script and session variables to
            store the variables.</p>
            <p>If the check script is named <code>checkuser.php</code>,
            the redirection statement should be:</p>
            <div class="sourceCode" id="cb13"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">header</span>(<span class="st">&quot;Location:checkuser.php&quot;</span>)<span class="ot">;</span></span></code></pre></div>
            <p>To create a session, call the function:</p>
            <div class="sourceCode" id="cb14"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">session_start</span>()<span class="ot">;</span></span></code></pre></div>
            <p>at the start of your scripts.</p>
            <p>Each time we store the POST data read by the form in the
            <code>$email</code> and <code>$pass</code> variables, we do
            the same in the session variables:</p>
            <div class="sourceCode" id="cb15"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="va">$email</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>]))<span class="ot">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="va">$_SESSION</span>[<span class="st">&#39;email&#39;</span>] <span class="op">=</span> <span class="va">$email</span><span class="ot">;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="va">$pass</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>]))<span class="ot">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="va">$_SESSION</span>[<span class="st">&#39;pass&#39;</span>] <span class="op">=</span> <span class="va">$pass</span><span class="ot">;</span></span></code></pre></div>
            <p>Another thing we need to do is to check if the inputs
            have any errors or if they are correct, in that case we will
            send them to the <code>checkuser.php</code> script. For that
            we create a boolean variable (<code>$err</code>) and
            initialize it to false. Then, if any input is incorrect, we
            change it to true. Finally, if the variable
            <code>$err</code> is false, we do the redirection with the
            correct data. Note that we need to set it <code>true</code>
            if we enter the form page directly, to avoid a direct
            redirection.</p>
            <p>The complete code:</p>
            <div class="sourceCode" id="cb16"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?php</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">session_start</span>()<span class="ot">;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">// define variables and set to empty values</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="va">$email</span> <span class="op">=</span> <span class="va">$pass</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="ot">;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="va">$emailErr</span> <span class="op">=</span> <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="ot">;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="va">$err</span> <span class="op">=</span> <span class="kw">false</span><span class="ot">;</span> <span class="co">//variable to check if there have been errors</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$_SERVER</span>[<span class="st">&quot;REQUEST_METHOD&quot;</span>] <span class="op">==</span> <span class="st">&quot;POST&quot;</span>) {</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>])) {</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">$emailErr</span> <span class="op">=</span> <span class="st">&quot;* Email is required&quot;</span><span class="ot">;</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">$err</span> <span class="op">=</span> <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">$email</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;email&#39;</span>]))<span class="ot">;</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>        <span class="va">$_SESSION</span>[<span class="st">&#39;email&#39;</span>] <span class="op">=</span> <span class="va">$email</span><span class="ot">;</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Check if the email is well-formed</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span><span class="fu">filter_var</span>(<span class="va">$email</span><span class="ot">,</span> <span class="cn">FILTER_VALIDATE_EMAIL</span>)) {</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>            <span class="va">$emailErr</span> <span class="op">=</span> <span class="st">&quot;* Invalid email format&quot;</span><span class="ot">;</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>            <span class="va">$err</span> <span class="op">=</span> <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="kw">empty</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>])){</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;* Password is required&quot;</span><span class="ot">;</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>        <span class="va">$err</span> <span class="op">=</span> <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>        <span class="va">$pass</span> <span class="op">=</span> <span class="fu">trim</span>(<span class="fu">strip_tags</span>(<span class="va">$_POST</span>[<span class="st">&#39;pass&#39;</span>]))<span class="ot">;</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>        <span class="va">$_SESSION</span>[<span class="st">&#39;pass&#39;</span>] <span class="op">=</span> <span class="va">$pass</span><span class="ot">;</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Check if the password has at least 8 chars</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">strlen</span>(<span class="va">$pass</span>) <span class="op">&lt;</span> <span class="dv">8</span>) {</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>            <span class="va">$passErr</span> <span class="op">=</span> <span class="st">&quot;* The password must have at least 8 characters&quot;</span><span class="ot">;</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>            <span class="va">$err</span> <span class="op">=</span> <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    <span class="va">$err</span> <span class="op">=</span> <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="op">!</span><span class="va">$err</span>) {</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">header</span>(<span class="st">&quot;Location:checkuser.php&quot;</span>)<span class="ot">;</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="kw">?&gt;</span></span></code></pre></div>
            <div class="sourceCode" id="cb17"><pre
            class="sourceCode html"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html</span> <span class="er">lang</span><span class="ot">=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;meta</span> <span class="er">charset</span><span class="ot">=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;title&gt;</span>Login sample<span class="kw">&lt;/title&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;meta</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;author&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;Ricardo Sanchez&quot;</span><span class="kw">&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;meta</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;description&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;a sample form to show validation techniques&quot;</span><span class="kw">&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;text/css&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;./main.css&quot;</span><span class="kw">&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;h1&gt;</span>Login<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p&gt;</span>Please, enter your email and password<span class="kw">&lt;/p&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;form</span> <span class="er">method</span><span class="ot">=</span><span class="st">&quot;post&quot;</span> <span class="er">action</span><span class="ot">=</span><span class="st">&quot;</span><span class="er">&lt;</span><span class="st">?php echo htmlspecialchars($_SERVER[&quot;</span><span class="er">PHP_SELF&quot;]);?</span><span class="kw">&gt;</span>&quot;&gt;</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;label&gt;</span> E-mail: <span class="kw">&lt;br&gt;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;text&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;email&quot;</span> <span class="er">value</span><span class="ot">=</span><span class="st">&quot;</span><span class="er">&lt;</span><span class="st">?= $email;?&gt;&quot;</span><span class="kw">&gt;</span>  <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;error&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;?</span>= $emailErr; <span class="kw">?&gt;</span> <span class="kw">&lt;/span&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/label&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;label&gt;</span>Password: <span class="kw">&lt;br&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;password&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;pass&quot;</span> <span class="er">value</span><span class="ot">=</span><span class="st">&quot;</span><span class="er">&lt;</span><span class="st">?= $pass;?&gt;&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;error&quot;</span><span class="kw">&gt;</span> <span class="kw">&lt;?</span>= $passErr; <span class="kw">?&gt;</span> <span class="kw">&lt;/span&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/label&gt;</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;input</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;submit&quot;</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;submit&quot;</span> <span class="er">value</span><span class="ot">=</span><span class="st">&quot;Submit&quot;</span><span class="kw">&gt;</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/form&gt;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
            <p>The <code>checkuser.php</code> script simply gets the
            session variables and compare them with the correct values,
            showing a message according to the result:</p>
            <div class="sourceCode" id="cb18"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?php</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">session_start</span>()<span class="ot">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="va">$correctEmail</span> <span class="op">=</span> <span class="st">&quot;peter@mail.com&quot;</span><span class="ot">;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="va">$correctPass</span> <span class="op">=</span> <span class="st">&quot;12345678&quot;</span><span class="ot">;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="va">$_SESSION</span>[<span class="st">&#39;pass&#39;</span>]<span class="op">==</span><span class="va">$correctPass</span> <span class="op">&amp;&amp;</span> <span class="va">$_SESSION</span>[<span class="st">&#39;email&#39;</span>]<span class="op">==</span><span class="va">$correctEmail</span>) {</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">&quot;Login correct: &lt;br&gt;&quot;</span><span class="ot">;</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">echo</span> <span class="st">&quot;Login incorrect: &lt;br&gt;&quot;</span><span class="ot">;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="kw">echo</span> <span class="va">$_SESSION</span>[<span class="st">&#39;email&#39;</span>] <span class="op">.</span> <span class="st">&quot;, &quot;</span> <span class="op">.</span> <span class="va">$_SESSION</span>[<span class="st">&#39;pass&#39;</span>] <span class="op">.</span> <span class="st">&quot;&lt;br&gt;&quot;</span><span class="ot">;</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="fu">session_destroy</span>()<span class="ot">;</span></span></code></pre></div>
            <p>You can get all the code from the <a
            href="https://github.com/ricardoprofe/login-sample">GitHub
            repository</a>.</p>
        </main>
        

        <!--- Modal images -->

        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- The Close Button -->
            <!--span class="close">&times;</span-->

            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="img01">

            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>

        <!-- End Modal Images -->

        <script>
            function ModalizeImages() {
                // Script basat en https://www.w3schools.com/howto/howto_css_modal_images.asp
                // PEr ampliar imatges en fer click

                // Get the modal
                var modal = document.getElementById("myModal");

                var modalImg = document.getElementById("img01");
                var captionText = document.getElementById("caption");

                // Get the image and insert it inside the modal - use its "alt" text as a caption
                //var img = document.getElementById("myImg");
                document.querySelectorAll("img").forEach((img => {
                        img.onclick = function() {
                            modal.style.display = "block";
                            modalImg.src = this.src;
                            captionText.innerHTML = this.alt;
                        }
                    }))
                    // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks on <span> (x), close the modal
                //span.onclick = function() {
                myModal.onclick = function() {
                    modal.style.display = "none";
                }


            }


            function markItem(id) {
                // Restaurem format de tots
                document.querySelectorAll("#TOC a").forEach(function(item) {
                        //item.style.fontWeight = "300";
                        item.classList.remove("navItemSelected");
                    })
                    //item.style.color = "#ff0000";

                // Afegim format
                let items = document.querySelectorAll("#TOC a[href='#" + id + "']");
                items.forEach(function(item) {
                    //item.style.fontWeight = "bolder";
                    item.classList.add("navItemSelected");
                })

            }

            var observer = new IntersectionObserver(function(entries) {
                // isIntersecting is true when element and viewport are overlapping
                // isIntersecting is false when element and viewport don't overlap
                if (entries[0].isIntersecting === true) {
                    let id = entries[0].target.id;
                    markItem(id);
                }

            }, {
                threshold: [0]
            });

            window.addEventListener("load", function() {
                document.querySelectorAll("h1, h2, h3").forEach(function(item) {
                    observer.observe(item);
                });

                document.querySelectorAll("#TOC a").forEach(function(item) {
                    item.addEventListener("click", function(item) {
                        markItem(item.id);
                    })
                })

                // Fem modals totes les imatges
                ModalizeImages();
            })

            document.querySelector("#TOC").addEventListener("click", function(event) {
                let toc = event.target
                if (toc.offsetWidth > 10) {
                    toc.classList.add("minimizedToc");
                }
            })

            document.querySelector("#TOC").addEventListener("mouseover", function(event) {
                let toc = event.target
                if (toc.classList.contains("minimizedToc"))
                    toc.classList.remove("minimizedToc");
            })


            //item.style.color = "#ff0000";
        </script>
    </div>
</body>

</html>